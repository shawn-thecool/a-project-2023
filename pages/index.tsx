import Head from 'next/head'
import { useState } from 'react'
import SimpleLayout from '../src/gg/adaptor/web/assets/layouts/SimpleLayout'
import { useSiteUC } from '../src/gg/adaptor/web/hooks'
import { SiteUseCase } from '../src/gg/application/usecases/SiteUseCase'
import { SiteEntity } from '../src/gg/domain/entities'

export default function Home() {
  const userId = 'test_user_id_100'
  const siteId = 'test_site_id_10000'

  const uc = useSiteUC()
  // const res = await useCreateSiteMutation().mutateAsync()
  const site = new SiteEntity({
    id: '',
    name: 'will create site name',
    url: 'url',
    platform: 'cafe24',
    status: '',
  })
  const create = uc.createSite(userId, site)
  const [createRes, setCreateRes] = useState(null)
  const onCreateSite = async () => {
    if (!userId) return
    const res = await create.mutateAsync()
    setCreateRes(res)
  }

  return (
    <>
      <Head>
        <title>Create Next App</title>
        <meta name='description' content='Generated by create next app' />
        <link rel='icon' href='/favicon.ico' />
      </Head>

      <SimpleLayout
        head={'index.page'}
        main={
          <div>
            <div>
              <h2>create site</h2>
              <button onClick={onCreateSite}>create site</button>
              <pre>{JSON.stringify(createRes, null, 2)}</pre>
            </div>
            <div>
              <h2>get site by id</h2>
              <pre>{JSON.stringify(uc.getSiteById(userId).data, null, 2)}</pre>
            </div>
          </div>
        }
      />
    </>
  )
}
